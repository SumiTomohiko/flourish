
from flourish.char.stone import Stone, allocate_resources
from flourish.geometry.switch import Switch
from flourish.stage import GameStage

class Stage > GameStage
  def init()
    self.stones = [
      Stone.new(self.index2pos(5), self.index2pos(7), 'north),
      Stone.new(self.index2pos(1), self.index2pos(5), 'east),
      Stone.new(self.index2pos(7), self.index2pos(3), 'west),
      Stone.new(self.index2pos(4), self.index2pos(1), 'south)]

    super(<<EOF, 2, 4, 'east)
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
w       wwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww
EOF
  end

  def allocate_resources(&block)
    allocate_resources(&block)
  end

  def overwrite_map(map)
    map[4][3] = Switch.new(self.stones)
  end

  def make_npc()
    return self.stones
  end
end

# vim: tabstop=2 shiftwidth=2 expandtab softtabstop=2
